<style id="inlined-styles-colors">
:root {
    /*  General.
        */
    --GW-body-background-color: #fff;
    --GW-body-text-color: #000;
    --GW-body-link-color: #272727;
    --GW-link-hover-color: #888;

    /*  Selection.
        */
    --GW-text-selection-background-color: #333;
    --GW-text-selection-color: #fff;

    /*  Link underlining.
        */
    --GW-link-underline-background-color: var(--GW-body-background-color);
    --GW-link-underline-gradient-line-color: #333;
    --GW-link-underline-gradient-line-color-hover: #999;

    /*  Blockquotes.
        */
    --GW-blockquote-border-color-level-one: #ccc;
    --GW-blockquote-border-color-level-two: #c4c4c4;
    --GW-blockquote-border-color-level-three: #b3b3b3;
    --GW-blockquote-border-color-level-four: #a6a6a6;
    --GW-blockquote-background-color-level-one: #f8f8f8;
    --GW-blockquote-background-color-level-two: #e6e6e6;
    --GW-blockquote-background-color-level-three: #d8d8d8;

    /*  Abstracts.
        */
    --GW-abstract-border-color: #bbb;
    --GW-abstract-background-color: var(--GW-blockquote-background-color-level-one);

    /*  Sidebar.
        */
    --GW-sidebar-horizontal-rule-color: #aaa;
    --GW-sidebar-mobile-link-border-color: #000;

    /*  Table of contents.
        */
    --GW-TOC-border-color: #ccc;
    --GW-TOC-background-color: #f8f8f8;
    --GW-TOC-link-hover-background-color: #ececec;
    --GW-TOC-link-hover-color: #000;
    --GW-TOC-link-hover-indicator-bar-color: #ccc;
    --GW-TOC-number-color: #909090;
    --GW-TOC-number-hover-color: #313131;

    /*  Collapse blocks.
        */
    --GW-collapse-block-disclosure-button-color: #999;
    --GW-collapse-block-disclosure-button-hover-color: #666;
    --GW-collapse-block-disclosure-button-targeted-color: #d6d6d6;
    --GW-table-collapse-block-disclosure-button-color: #ccc;
    --GW-table-collapse-block-disclosure-button-hover-color: #eee;
    --GW-collapse-block-disclosure-button-focus-text-shadow-color: #e00;
    --GW-collapse-block-disclosure-button-hover-background-color: rgba(0,0,0,0.1);
    --GW-collapse-block-click-to-expand-text-color: #777;
    --GW-collapse-block-click-to-expand-text-shadow-color: var(--GW-body-background-color);
    --GW-collapse-block-click-to-expand-text-hover-color: #444;
    --GW-collapse-block-hover-border-color: #777;
    --GW-collapse-block-fade-gradient-color-one: rgba(255,255,255,0);
    --GW-collapse-block-fade-gradient-color-two: rgba(255,255,255,1);

    /*  Headings.
        */
    --GW-H1-box-shadow-background-color: var(--GW-body-background-color);
    --GW-H1-box-shadow-line-color: #888;
    --GW-H2-bottom-border-color: #888;

    /*  Comments.
        */
    --GW-comment-section-top-border-color: #999;

    /*  Lists.
        */
    --GW-bulleted-list-marker-color: #808080;

    /*  Figures.
        */
    --GW-figure-outline-color: #888;
    --GW-figure-caption-outline-color: #888;

    /*  Epigraphs.
        */
    --GW-epigraph-quotation-mark-color: #808080;

    /*  Footnotes.
        */
    --GW-footnote-border-color: #aaa;
    --GW-footnote-highlighted-border-color: #aaa;
    --GW-footnotes-section-top-rule-color: #ccc;
    --GW-footnote-backlink-border-color: #000;
    --GW-footnote-backlink-border-hover-color: #999;
    --GW-footnote-backlink-after-bordered-block-background-color: var(--GW-body-background-color);

    /*  Footnote references.
        */
    --GW-footnote-ref-highlight-box-shadow-color: #aaa;
    --GW-footnote-ref-highlight-background-color: rgba(255,255,255,0.75);

    /*  Sidenotes.
        */
    --GW-sidenote-highlight-background-color: var(--GW-body-background-color);
    --GW-sidenote-highlight-box-shadow-color: #aaa;
    --GW-sidenote-border-color: #aaa;
    --GW-sidenote-scrollbar-track-color: var(--GW-body-background-color);
    --GW-sidenote-scrollbar-thumb-color: #aaa;
    --GW-sidenote-scrollbar-thumb-hover-color: #999;
    --GW-sidenote-self-link-border-color: #aaa;

    /*  Tables.
        */
    --GW-table-border-color: #000;
    --GW-table-full-width-background-color: var(--GW-body-background-color);
    --GW-table-caption-border-color: #000;
    --GW-table-row-horizontal-border-color: #000;
    --GW-table-cell-vertical-border-color: var(--GW-body-background-color);
    --GW-table-scrollbar-track-color: var(--GW-body-background-color);
    --GW-table-scrollbar-thumb-color: #aaa;
    --GW-table-scrollbar-thumb-hover-color: #999;
    --GW-table-scrollbar-border-color: #000;
    --GW-table-column-heading-hover-background-color: #e2f0f2;
    --GW-table-sorted-column-heading-background-color: #8bd0ed;
    --GW-table-sorted-column-heading-text-color: #fff;
    --GW-table-sorted-column-heading-text-shadow-color: #000;
    --GW-table-zebra-stripe-alternate-row-background-color: #f6f6f6;
    --GW-table-row-hover-outline-color: #000;

    /*  Code blocks.
        */
    --GW-code-element-border-color: #c8c8c8;
    --GW-code-element-background-color: #fafafa;
    --GW-pre-element-border-color: #c8c8c8;
    --GW-pre-element-background-color: #fafafa;
    --GW-pre-element-scrollbar-track-color: #fafafa;
    --GW-pre-element-scrollbar-thumb-color: #ccc;
    --GW-pre-element-scrollbar-thumb-hover-color: #999;

    /*  Syntax highlight theme.
        */
    --GW-syntax-highlight-color-normal: #1f1c1b;
    --GW-syntax-highlight-color-attribute: #002561;
    --GW-syntax-highlight-color-data-type: inherit;
    --GW-syntax-highlight-color-variable: #666666;
    --GW-syntax-highlight-color-other: inherit;
    --GW-syntax-highlight-color-preprocessor: inherit;
    --GW-syntax-highlight-color-extension: #888888;
    --GW-syntax-highlight-color-comment: #888888;
    --GW-syntax-highlight-color-control-flow: #003900;
    --GW-syntax-highlight-color-keyword: #002561;
    --GW-syntax-highlight-color-operator: #002561;
    --GW-syntax-highlight-color-special-char: #607880;
    --GW-syntax-highlight-color-built-in: #002561;
    --GW-syntax-highlight-color-function: #002561;
    --GW-syntax-highlight-color-constant: inherit;
    --GW-syntax-highlight-color-base-n: inherit;
    --GW-syntax-highlight-color-dec-val: inherit;
    --GW-syntax-highlight-color-float: inherit;
    --GW-syntax-highlight-color-information: inherit;
    --GW-syntax-highlight-color-char: inherit;
    --GW-syntax-highlight-color-string: inherit;
    --GW-syntax-highlight-color-verbatim-string: inherit;
    --GW-syntax-highlight-color-alert: #bf0303;
    --GW-syntax-highlight-color-error: #ff0000;
    --GW-syntax-highlight-color-import: #777777;
    --GW-syntax-highlight-color-special-string: #666666;

    /*  Math.
        */
    --GW-math-block-scrollbar-border-color: #ccc;
    --GW-math-block-scrollbar-track-color: var(--GW-body-background-color);
    --GW-math-block-scrollbar-thumb-color: #ccc;
    --GW-math-block-scrollbar-thumb-hover-color: #999;

    /*  Drop caps.
        */
    --GW-drop-caps-yinit-color: #0d0d0d;
    --GW-drop-caps-yinit-text-shadow-color: #777;
    --GW-drop-caps-de-zs-color: #1b1b1b;
    --GW-drop-caps-cheshire-color: #191919;
    --GW-drop-caps-kanzlei-color: #191919;

    /*  Admonitions.
        */
    --GW-admonition-default-left-border-color: #909090;
    --GW-admonition-default-background-color: #d8d8d8;
    --GW-admonition-tip-left-border-color: #d8d8d8;
    --GW-admonition-tip-background-color: #f0f0f0;
    --GW-admonition-warning-left-border-color: #5a5a5a;
    --GW-admonition-warning-background-color: #9a9a9a;
    --GW-admonition-warning-text-color: #fff;
    --GW-admonition-warning-title-background-color: #5a5a5a;
    --GW-admonition-warning-icon-color: #fff;
    --GW-admonition-error-left-border-color: #2d2d2d;
    --GW-admonition-error-background-color: #5a5a5a;
    --GW-admonition-error-text-color: #fff;
    --GW-admonition-error-title-background-color: #2d2d2d;
    --GW-admonition-error-icon-color: #fff;

    /*  Sequential nav UI.
        */
    --GW-sequential-nav-link-background-color: var(--GW-body-background-color);

    /*  Links.
        */
    --GW-definition-annotation-text-color: #444;

    /*  Page-specific styles.
        */
    --GW-index-page-bottom-ornament-line-color: #808080;

    /*  Popups.
        */
    --GW-popups-body-background-color: var(--GW-body-background-color);
    --GW-popups-popup-background-color: var(--GW-body-background-color);
    --GW-popups-popup-border-color: #aaa;
    --GW-popups-box-shadow-color: #aaa;
    --GW-popups-popup-link-hover-color: var(--GW-link-hover-color);
    --GW-popups-popup-scrollbar-thumb-color: #ccc;
    --GW-popups-popup-scrollbar-track-color: var(--GW-body-background-color);
    --GW-popups-popup-scrollbar-thumb-hover-color: #999;
    --GW-popups-popup-options-dialog-backdrop-background-color: rgba(255,255,255,0.95);
    --GW-popups-popup-options-dialog-background-color: var(--GW-body-background-color);
    --GW-popups-popup-options-dialog-border-color: #aaa;
    --GW-popups-popup-options-dialog-box-shadow-color: #444;
    --GW-popups-popup-options-dialog-horizontal-rule-color: #ccc;
    --GW-popups-popup-options-dialog-button-background-color: var(--GW-body-background-color);
    --GW-popups-popup-options-dialog-button-text-color: #000;
    --GW-popups-popup-options-dialog-button-border-color: #000;
    --GW-popups-popup-options-dialog-button-hover-box-shadow-color: #000;
    --GW-popups-popup-options-dialog-option-button-explanation-text-color: #777;
    --GW-popups-popup-options-dialog-option-button-hover-text-color: #777;
    --GW-popups-popup-options-dialog-radio-button-border-color: #000;
    --GW-popups-show-popup-options-dialog-button-color: #999;

	/*	Link bibliography.
		*/
	--GW-link-bibliography-border-color: #ccc;

    /*  Image focus.
        */
    --GW-image-focus-image-hover-drop-shadow-color: #777;

    /*  Mode selector (light/dark mode).
        */
    --GW-mode-selector-background-color: var(--GW-body-background-color);
    --GW-mode-selector-border-hover-color: #aaa;
    --GW-mode-selector-button-text-color: #777;
    --GW-mode-selector-button-hover-text-color: #000;
}
</style>
<style id="inlined-styles">
/*********/
/* FONTS */
/*********/
/* fonts are now loaded from /static/css/fonts.css */

/**********/
/* COLORS */
/**********/
/* colors are now in /static/css/colors.css or dark-mode.css */

/*************/
/* VARIABLES */
/*************/

:root {
	--GW-serif-font-stack: "Source Serif Pro",  "Apple Garamond", "Baskerville", "Libre Baskerville", "Times New Roman", "Droid Serif", "Times", serif;
	--GW-sans-serif-font-stack: "Lucida Sans Unicode", "Source Sans Pro", Helvetica, "Trebuchet MS", sans-serif;
	--GW-monospaced-font-stack: "IBM Plex Mono", "Liberation Mono", Consolas, Courier, monospace;

    --GW-body-text-font-size: 1rem;
}

/***********/
/* GENERAL */
/***********/

html {
	padding: 0;
	margin: 0;
	background-color: var(--GW-body-background-color);
	color: var(--GW-body-text-color);
	font-weight: 400;
	font-family: var(--GW-serif-font-stack);
}

body {
	max-width: 1120px;

    font-size: var(--GW-body-text-font-size);
}

@media only screen and (max-width: 649px) {
	html {
		font-size: 18px;
	}
}

@media only screen and (min-width: 650px) {
	body {
		padding: 0 15px 0 5px;
		margin: 0 auto;
	}
	@media only screen and (min-width: 1185px) {
		body {
			padding: 0 60px 0 5px;
		}
	}
	main {
		min-height: 100vh;
		display: flex;
		flex-flow: column;
	}
	/*  Breakpoint for sidenotes.
		*/
	@media only screen and (min-width: 1761px) {
		main {
			position: relative;
			right: 40px;
		}
	}
	article {
		flex: 1 1 auto;
	}
	#sidebar {
		position: absolute;
	}
	header,
	article {
		margin-left: 155px;
	}
	@media only screen and (max-width: 1200px) {
		header,
		article {
			margin-left: 145px;
		}
	}
	@media only screen and (max-width: 1120px) {
		header,
		article {
			margin-left: 140px;
		}
	}
	@media only screen and (max-width: 1040px) {
		header,
		article {
			margin-left: 135px;
		}
	}
	@media only screen and (max-width: 960px) {
		header,
		article {
			margin-left: 130px;
		}
	}
}

@media only screen and (max-width: 649px) {
	body {
		margin: 0 20px;
	}
}

svg {
	fill: currentColor;
}

/***********/
/* SIDEBAR */
/***********/

#sidebar a {
	display: block;
}

@media only screen and (min-width: 650px) {
	#sidebar {
		font-variant: small-caps;
		padding: 0 40px 0 10px;
		width: 100px;
	}
	#sidebar a#logo {
		margin: 1em 0 2em 0;
	}
	#sidebar a#logo svg {
		width: 64px;
	}
	#sidebar a.new,
	#sidebar a.patreon {
		border-top: 1px dotted var(--GW-sidebar-horizontal-rule-color);
	}
	#sidebar a.new {
		padding-top: 0.45em;
		margin-top: 0.55em;
	}
	#sidebar a.patreon {
		padding-top: 0.6em;
		margin-top: 0.55em;
		font-size: 0.9em;
		white-space: nowrap;
		line-height: 1.35;
	}
	#sidebar a.mail,
	#sidebar a.r_gwern {
		padding-left: 0.125em;
		margin-top: 0.05em;
	}
	#sidebar a.mail::before,
	#sidebar a.r_gwern::before {
		content: "\2727\2007";
		bottom: 0.2em;
		position: relative;
		font-size: 0.6em;
	}
}

@media only screen and (max-width: 649px) {
	#sidebar {
		justify-content: center;
		margin: 1.4em 0 0.5em 0;
	}
	#sidebar a {
		border: 1px dotted var(--GW-sidebar-mobile-link-border-color);
		padding: 3px 10px;
		text-align: center;
		margin: 1px;
	}
	#sidebar a#logo {
		padding: 8px 5px 3px 5px;
	}
	#sidebar,
	#sidebar-links {
		display: flex;
	}
	#sidebar-links {
		flex-flow: row wrap;
		margin: 0.5em 0 0 0;
	}
	#sidebar a.site,
	#sidebar a.links {
		flex: 1 1 40%;
	}
	#sidebar a.new,
	#sidebar a.mail,
	#sidebar a.r_gwern {
		padding: 3px 10px;
		flex: 1 1 auto;
	}
	#sidebar a.patreon {
		display: none;
	}
	#sidebar #logo {
		margin: calc(0.5em + 1px) 1px 1px 0;
	}
	#sidebar #logo svg {
		width: 2.5rem;
	}
}

/***************/
/* PAGE HEADER */
/***************/

header {
	overflow: auto;
}

header h1 {
	margin: 0.75em 0;
	text-align: center;
	text-transform: none;
	font-variant: small-caps;
	font-size: 2.5em;
	line-height: 1.15;
	font-weight: 600;
	letter-spacing: -1px;
}

@media only screen and (max-width: 649px) {
	header h1 {
		font-size: 2em;
	}
}

/***********************/
/* PAGE METADATA BLOCK */
/***********************/

@media only screen and (max-width: 649px) {
	#page-metadata {
		text-align: center;
	}
}

#page-metadata hr {
	display: none;
}

#page-metadata {
	margin: 0 0 2rem 0;
	overflow: auto;
	font-size: 0.95em;
	line-height: 1.5;
}

/* Override normal handling of italics: before, we wrapped descriptions in `<em>`; however, they compile to HTML which can contain italics of their own (eg book titles). This causes HTML Tidy to warn about nested italics (which is valid HTML but *usually* means you've made an error - this often triggers when I mess up bolding, for example, like on /GPT-3 ). So we removed the wrapper in favor of the above `font-style: italic`. However, now the titles don't unitalicize automatically like they would for nested italics! So we force italicized titles back to normal Roman font to match the expected typographic convention. */
#page-metadata #page-description {
	display: block;
	margin: 0 auto 0.75em auto;
	font-style: italic;
}
#page-metadata #page-description em {
	font-style: normal;
}

#page-metadata #page-description ~ * {
	font-size: 0.9em;
}

#page-metadata #page-description + br {
	display: none;
}

#page-metadata-block span:nth-of-type(n+3) {
	white-space: nowrap;
}

/* interpunct separators for the metadata fields; looks nicer than semicolons or slashes */
#page-metadata-block > span:not(:last-child)::after {
  content: "\00B7"; /* interpunct MIDDLE DOT (U+00B7) '·' */
  display: inline-block;
  margin:0 0.2em 0 0.6em;
}
#page-metadata-block > span:nth-child(1)::after {
  margin-left: 0.875em;
}
#page-metadata-block > span:nth-child(2)::after {
  margin-left: 0.8125em;
}

/*=--------=*/
/*= /index =*/
/*=--------=*/

/* on the index page, we hide article-related formatting, begging, comments, to make it more compact & classy */
body.index #sidebar a.patreon,
body.tags #sidebar a.patreon,
body.index #TOC,
body.index #page-metadata,
body.index #comments,
body.index #disqus_thread,
body.index header,
body.index #link-bibliography {
	display: none;
}

/*  No index self-link. */
body.index #sidebar a#logo {
	pointer-events: none;
}

/*  Make the sections reflow; better than fixed-width tables. */
body.index article section {
	display: inline-block;
	vertical-align: top;
}

/*  Abstract is not a real abstract, just an introduction, no need for the abstract formatting.
	*/
body.index .abstract {
	padding: 0;
	border: none;
	margin: 0;
	box-shadow: none;
}

@media only screen and (min-width: 1200px) {
	/*  Leave enough horizontal room to show multiple sections simultaneously, table-like */
	body.index #markdownBody {
		width: 1350px;
		max-width: calc(50vw + 420px);
	}
	body.index p,
	body.index hr {
		max-width: 970px;
	}
}

/*  Add some vertical padding for the introduction.
	*/
body.index #markdownBody {
	padding-top: 15px;
}

/*  Headings on the home page.
	*/
body.index #markdownBody h1 {
	margin: 1.125em 0 0 0;
}

/*  Lists on the home page.
	*/
body.index #markdownBody ul,
body.tags #markdownBody ul {
	margin: 1em 3em 0 0;
	padding: 0 0 0 1.375em;
}
body.index #markdownBody li > ul,
body.tags #markdownBody li > ul {
	margin: 0.25em 0 0.25em 0;
}
body.index #markdownBody li,
body.tags #markdownBody li {
	margin-top: 0;
}
body.index #markdownBody ul > li:nth-of-type(n+2) {
	margin: 0;
}


@media only screen and (max-width: 649px) {
	body.index #sidebar #logo {
		border: 1px dotted transparent;
		align-self: flex-start;
		padding: 7px 5px 6px 5px;
	}
	body.index #markdownBody section {
		max-width: 100%;
	}
	body.index #markdownBody ul,
	body.tags #markdownBody ul {
		overflow-wrap: break-word;
		margin-right: 0;
	}
	body.index #markdownBody li,
	body.tags #markdownBody li {
		padding: 1px 0;
		margin: 2px 0 0 0;
	}
	body.index #markdownBody ul > li::before,
	body.tags #markdownBody ul > li::before {
		top: 0.25em;
	}
}

/*********************/
/* TABLE OF CONTENTS */
/*********************/

#TOC {
	border: 1px solid var(--GW-TOC-border-color);
	background-color: var(--GW-TOC-background-color);
	font-family: var(--GW-sans-serif-font-stack);
	margin: 0 2rem 1.5rem 0;
	line-height: 1.25;
	padding: 10px 10px 2px 14px;
	position: relative;
	z-index: 11;
}

#TOC:empty {
	display: none;
}

/*  On mobile, we want the TOC to be inline, but for desktop, we want it side by side with the content.
	*/
@media only screen and (max-width: 1280px) {
	#TOC {
		font-size: 0.95rem;
	}
}

@media only screen and (max-width: 1200px) {
	#TOC {
		font-size: 0.90rem;
	}
}

@media only screen and (max-width: 1120px) {
	#TOC {
		font-size: 0.85rem;
		margin: 0 1.5rem 1.25rem 0;
	}
}

@media only screen and (max-width: 1040px) {
	#TOC {
		font-size: 0.80rem;
		margin: 0 1.25rem 1rem 0;
	}
}

@media only screen and (max-width: 960px) {
	#TOC {
		margin: 0 1rem 1rem 0;
	}
}

@media only screen and (min-width: 900px) {
	#TOC {
		float: left;
		max-width: 285px;
	}
}

@media only screen and (max-width: 900px) {
	#TOC {
		float: none;
		margin: 2em auto;
		font-size: 1rem;
	}
	#TOC > ul > li > ul {
		column-count: 2;
	}
}

@media only screen and (max-width: 649px) {
	#TOC a {
		display: inline-block;
	}
	#TOC > ul > li > ul {
		column-count: 1;
	}
	#TOC li li a {
		padding: 0 0 1px 0;
	}
	#TOC li li li a {
		padding: 0 0 2px 0;
	}
	#TOC li li li li a {
		padding: 0 0 3px 0;
	}
	#TOC li li li li a {
		padding: 0 0 4px 0;
	}
}

/*=-----------------=*/
/*= TOC list layout =*/
/*=-----------------=*/

#TOC ul {
	list-style-type: none;
	padding-left: 0em;
	margin-bottom: 0;
	margin-top: 4px;
	padding-left: 1.4em;
	text-indent: 0;
	padding: 0;
	overflow: unset;
}

#TOC ul ul {
	list-style-type: none;
	padding-left: 0.7em;
	margin-top: 2px;
}

#TOC li {
	font-weight: bold;
	margin: 5px 0 10px 0;
	padding-left: 1.125em;
	position: relative;
	overflow-wrap: break-word;
}

#TOC li li {
	margin-bottom: 0;
	font-weight: normal;
	font-size: 0.9em;
}

#TOC p {
	margin-top: 9px;
	margin-bottom: 3px;
}

/*=------------------=*/
/*= TOC link styling =*/
/*=------------------=*/

#TOC a {
	border: 0;
	display: block;
	position: relative;
	padding: 0 0.25rem 0 0;
}

#TOC a:hover {
	background-color: var(--GW-TOC-link-hover-background-color);
	color: var(--GW-TOC-link-hover-color);
}
#TOC a:hover::after {
	content: "";
	display: inline-block;
	position: absolute;
	left: 100%;
	top: 0;
	background-color: var(--GW-TOC-link-hover-indicator-bar-color);
	width: 0.25em;
	height: 100%;
}

/*=--------------------------=*/
/*= Inline code in TOC links =*/
/*=--------------------------=*/

#TOC code {
	font-family: inherit;
	font-size: inherit;
	border: none;
	padding: 0;
	background-color: inherit;
}

/*=-------------------------------=*/
/*= Wikipedia-style TOC numbering =*/
/*=-------------------------------=*/

#TOC > ul {
	counter-reset: htoc_1;
}
#TOC > ul > li::before {
	counter-increment: htoc_1;
	content: counter(htoc_1) "\2006  ";
}
#TOC > ul ul {
	counter-reset: htoc_2;
}
#TOC > ul ul li::before {
	counter-increment: htoc_2;
	content: counter(htoc_1) "." counter(htoc_2) "\2006  ";
}
#TOC > ul ul ul {
	counter-reset: htoc_3;
}
#TOC > ul ul ul li::before {
	counter-increment: htoc_3;
	content: counter(htoc_1) "." counter(htoc_2) "." counter(htoc_3) "\2006  ";
}
#TOC > ul ul ul ul {
	counter-reset: htoc_4;
}
#TOC > ul ul ul ul li::before {
	counter-increment: htoc_4;
	content: counter(htoc_1) "." counter(htoc_2) "." counter(htoc_3) "." counter(htoc_4) "\2006  ";
}
#TOC > ul ul ul ul ul {
	counter-reset: htoc_5;
}
#TOC > ul ul ul ul ul li::before {
	counter-increment: htoc_5;
	content: counter(htoc_1) "." counter(htoc_2) "." counter(htoc_3) "." counter(htoc_4) "." counter(htoc_5) "\2006  ";
}
#TOC > ul ul ul ul ul ul {
	counter-reset: htoc_6;
}
#TOC > ul ul ul ul ul ul li::before {
	counter-increment: htoc_6;
	content: counter(htoc_1) "." counter(htoc_2) "." counter(htoc_3) "." counter(htoc_4) "." counter(htoc_5) "." counter(htoc_6) "\2006  ";
}
#TOC ul li::before {
	position: absolute;
	right: calc(100% - 1em);
	left: unset;
	width: 111px;
	text-align: right;
	font-weight: normal;
	pointer-events: none;
	color: var(--GW-TOC-number-color);
}
#TOC ul li:hover::before {
	color: var(--GW-TOC-number-hover-color);
}

/* The table of contents is a *table*, so align */
#TOC {
	font-variant-numeric: tabular-nums;
}

/****************/
/* MAIN CONTENT */
/****************/

#markdownBody {
	/*  Try to avoid scrollbars on paragraphs: prevents long unbroken
		un-hyphenatable lines from causing H-scrolling
		*/
	overflow-wrap: break-word;
}

/*  Breakpoint for sidenotes.
	*/
@media only screen and (min-width: 1761px) {
	#markdownBody {
		position: relative;
	}
}

@media only screen and (min-width: 650px) {
	@media only screen and (max-width: 1000px) {
	/*  Replaces A/B-test-set average value; the wider the screen, the more
		line-height is necessary, and no one size suits all, so set 3 brackets
		of increasing height.
		*/
		#markdownBody {
			line-height: 1.45;
		}
	}
	@media only screen and (min-width: 1001px) and (max-width: 1200px) {
		#markdownBody {
			line-height: 1.5;
		}
	}
	@media only screen and (min-width: 1201px) {
		#markdownBody {
			line-height: 1.55;
		}
	}
}

/*  Use justified text (words get broken/hyphenated as necessary to avoid a
	'ragged margin'), undoing the default of 'flush left, ragged' right (see
	https://en.wikipedia.org/wiki/Typographic_alignment#Flush_left )

	WARNING: 'auto' hyphenation does not work in Chrome desktop due to long-standing inability/refusal:
	https://bugs.chromium.org/p/chromium/issues/detail?id=47083 https://bugs.chromium.org/p/chromium/issues/detail?id=605840 https://bugs.chromium.org/p/chromium/issues/detail?id=652964
	/images/design/2019-02-19-meme-distractedboyfriend-chromehyphenation.jpg

	To work around Chrome failure, we use Edward Kmett's Haskell-ification of the TeX algorithm & dictionaries ( https://hackage.haskell.org/package/hyphenation ) to run a Hakyll compilation pass to insert soft hyphens. There is one bad side-effect: soft hyphens are often preserved in copy-paste, cluttering text, so a copy-paste JS listener in rewrite.js deletes all fancy hyphens from copy-pastes.
	*/
#markdownBody p,
#markdownBody li {
	text-align: justify;
	-webkit-hyphens: auto;
	-ms-hyphens: auto;
	hyphens: auto;
}

/*  Cute 'old-style' numerals, look a little nicer inline in text, and available natively in the SS fonts:
	https://practicaltypography.com/alternate-figures.html#oldstyle-figures
	*/
html {
	font-variant-numeric: oldstyle-nums;
}

.abstract > blockquote {
	margin: 0 0 1.5em 0;
	background-color: var(--GW-abstract-background-color);
	border-color: var(--GW-abstract-border-color);
	padding: 0.9rem 1.25rem 0.95rem 1.25rem;
	clear: none;
}

/* auto-smallcaps the first line of the introduction (= the first `<p>` after `<div class="abstract"></div>`); this avoids the need to manually specify what to smallcaps, and it auto-adjusts to screen/line-width, which is nicer. */
.abstract + p::first-line, #markdownBody > p:first-child::first-line { font-feature-settings: 'smcp'; }

h1 {
	margin: 0.6em 0 0.5em -0.75rem;
	font-weight: bold;
	position: relative;
}

@media only screen and (max-width: 650px) {
	h1 {
		margin: 1.25em 0 0.5em 0;
	}
}

/*=----------------=*/
/*= Heading levels =*/
/*=----------------=*/
h1 {
	font-feature-settings: 'smcp';
	font-size: 1.75em;
	line-height: 1.25;
	letter-spacing: -0.75px;
}

/*************/
/* SIDENOTES */
/*************/

/*  Hide sidenote columns on narrow viewports.
    */
@media only screen and (max-width: 1760px) {
    #sidenote-column-left,
    #sidenote-column-right {
        display: none;
    }
}

/*=--------------=*/
/*= Margin notes =*/
/*=--------------=*/

/*  On wide viewports, hide margin note until it is styled as a sidenote (i.e,
    until it gets the `.sidenote` class applied to it).
    */
@media only screen and (min-width: 1761px) {
	.marginnote {
		display: none;
	}
}

/*********/
/* LINKS */
/*********/

#markdownBody a {
	/* force the occasional inline URL or other long word to break at max-width */
	word-wrap: break-word;
}

a {
	color: var(--GW-body-link-color); /* off-black */
	text-decoration: none;
}

/*=------------------------=*/
/*= Fancy link underlining =*/
/*=------------------------=*/

/*  Tufte CSS for underlining (https://github.com/edwardtufte/tufte-css)
	The advantage of all this CSS linenoise compared to the previous 'text-decoration: none; border-bottom: 1px Solid grey;' solution from http://devhints.wordpress.com/2006/10/24/css-links-with-different-color-underlines/
	is the 'skip-ink': when dealing with characters with 'descenders', like 'y', 'g', 'p', 'q' etc, with regular underlining the bottom stroke overlaps with the line and it's harder to read;
	by adding this text-shadow stuff and backgrounding, a little break is made in the underline to add contrast and keep the descender fully visible and outlined. (The downside is that the overlapping text-shadows can also slightly damage the rendering of slashes & parentheses, which come too close and get partially erased.)

	Unfortunately, we don't want to add underlines to links in the TOC because it clutters it (all the lines are links and are in small font), so we have to avoid styling the TOC, which is difficult.
	I got around this by adding in the Hakyll template an additional <div> just for the body of the Markdown content, excluding the TOC, and changing the Tufte CSS to target *that* instead.

May be able at some point to simplify this using regular link underlining, since CSS4's `text-decoration-skip-ink` by default avoids overlapping with text descenders (but as of Oct 2019, no Edge/IE or Safari support, and only the latest Firefox 70 supports it; maybe in a few years...): https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-skip-ink#Browser_Compatibility https://www.caniuse.com/#feat=mdn-css_properties_text-decoration-skip-ink (Right now, Firefox skip-ink looks quite bad: it doesn't skip enough ink, defeating the point, and also positions the underline badly!)
*/

article > :not(#TOC) a:link,
span.defnMetadata {
	text-decoration: none;
	background-image: linear-gradient(var(--GW-link-underline-gradient-line-color), var(--GW-link-underline-gradient-line-color));
	background-size: 1px 1px;
	background-repeat: repeat-x;
	background-position: 0% calc(100% - 0.1em);

	/*  Disable oldstyle nums in underlined links because the oldstyle nums are almost subscript-like and overlap */
	font-variant-numeric: lining-nums;
}
article > :not(#TOC) a:link,
article > :not(#TOC) a:link *,
span.defnMetadata,
span.defnMetadata * {
	text-shadow:
		 0.05em 0	   var(--GW-link-underline-background-color),
		-0.05em 0	   var(--GW-link-underline-background-color),
		 0	  0.05em   var(--GW-link-underline-background-color),
		 0	 -0.05em   var(--GW-link-underline-background-color),
		 0.08em 0	   var(--GW-link-underline-background-color),
		-0.08em 0	   var(--GW-link-underline-background-color),
		 0.11em 0	   var(--GW-link-underline-background-color),
		-0.11em 0	   var(--GW-link-underline-background-color),
		 0.14em 0	   var(--GW-link-underline-background-color),
		-0.14em 0	   var(--GW-link-underline-background-color),
		 0.17em 0	   var(--GW-link-underline-background-color),
		-0.17em 0	   var(--GW-link-underline-background-color);
}
article > :not(#TOC) a:hover {
	background-image: linear-gradient(var(--GW-link-underline-gradient-line-color-hover), var(--GW-link-underline-gradient-line-color-hover));
}

/* eliminate the blurring of headers and links when selecting by overriding the text-shadow: */
::selection {
	text-shadow: none;
	background: var(--GW-text-selection-background-color);
	color: var(--GW-text-selection-color);
}

/*  Prevent code block background color and border from obscuring link
	underlining, for inline <code> elements in links.
	*/
a code {
	z-index: -1;
	position: relative;
	border-bottom-width: 0;
	word-break: normal;
}
/*  But not in the TOC…
    */
#TOC a code {
	z-index: unset;
}

/**************/
/* PARAGRAPHS */
/**************/

p {
	margin: 0;
}
p + p {
	text-indent: 2.5em;
}
p + figure[class^='float-'] + p {
    text-indent: 2.5em;
}
@media only screen and (max-width: 649px) {
	p + p {
		text-indent: 1em;
	}
	p + figure[class^='float-'] + p {
		text-indent: 1em;
	}
}

/***************/
/* BLOCKQUOTES */
/***************/
/* additional blockquote styling done in default.css */

blockquote {
	--GW-link-underline-background-color: var(--GW-blockquote-background-color);

	margin: 1.625em 0 1.75em 0;
	border: 1px solid var(--GW-blockquote-border-color);
	background-color: var(--GW-blockquote-background-color);
	font-size: 0.95em;
	padding: 1em 1.25em;
}

/*	Three-level of blockquote emphasis (darkening).
	*/
blockquote,
blockquote blockquote blockquote blockquote {
	--GW-blockquote-background-color: var(--GW-blockquote-background-color-level-one);
}
blockquote {
	--GW-blockquote-border-color: var(--GW-blockquote-border-color-level-one);
}
blockquote blockquote blockquote blockquote {
	--GW-blockquote-border-color: var(--GW-blockquote-border-color-level-four);
}

blockquote blockquote,
blockquote blockquote blockquote blockquote blockquote {
	--GW-blockquote-border-color: var(--GW-blockquote-border-color-level-two);
	--GW-blockquote-background-color: var(--GW-blockquote-background-color-level-two);
}

blockquote blockquote blockquote,
blockquote blockquote blockquote blockquote blockquote blockquote {
	--GW-blockquote-border-color: var(--GW-blockquote-border-color-level-three);
	--GW-blockquote-background-color: var(--GW-blockquote-background-color-level-three);
}

/*=--------------------=*/
/*= Various edge cases =*/
/*=--------------------=*/

@media only screen and (min-width: 650px) {
    blockquote {
        overflow: hidden;
    }
}
@media only screen and (max-width: 649px) {
    /* even less horizontal is available on mobile! */
    blockquote {
        margin: 1.25em 0 1.5em 0;
    }
}

p + blockquote {
    margin-top: 1em;
}

/***************/
/* CODE BLOCKS */
/***************/

pre {
    overflow: auto;
}

@supports (width: fit-content) {
	.full-width-code-block-wrapper {
		width: fit-content;
	}
}
@supports (width: -moz-fit-content) {
	.full-width-code-block-wrapper {
		width: -moz-fit-content;
	}
}

/********/
/* MATH */
/********/

.mjpage__block {
    display: block;
    overflow: auto;
}

/**********/
/* TABLES */
/**********/

.tableWrapper {
    margin: 2em 0 2.125em 0;
    overflow-x: auto;
    overflow-y: hidden;
    box-sizing: border-box;
}

/*=-------------------=*/
/*= Full-width tables =*/
/*=-------------------=*/

.tableWrapper.full-width {
    position: relative;
}

/***********/
/* FIGURES */
/***********/

figure img,
figure video {
    display: block;
    max-height: calc(100vh - 8em);
    max-width: 100%;
    height: auto;
    width: auto;
    margin: 0 auto;
}

/********/
/* MISC */
/********/

/*  enable standard Pandoc attribute-based syntax for small-caps like '[foo]{.smallcaps}'; see https://pandoc.org/MANUAL.html#small-caps
	*/
span.smallcaps {
	font-feature-settings: 'smcp';
}

/* Enable SSfP smallcaps for auto-annotated abbreviations/acronyms */
span.smallcaps-auto {
	font-feature-settings: 'smcp', 'c2sc';
	font-variant-numeric: tabular-nums;
}

/*************/
/* DARK MODE */
/*************/
/* see /static/js/darkmode.js and /static/css/dark-mode.css; this allows the user to toggle at runtime */
</style>
<style id="inlined-dark-mode-styles" media="all and (prefers-color-scheme: dark)">
:root {
    /*  General.
        */
    --GW-body-background-color: #000;
    --GW-body-text-color: #fff;
    --GW-body-link-color: #e5e5e5;
    --GW-link-hover-color: #999;

    /*  Selection.
        */
    --GW-text-selection-background-color: #dcdcdc;
    --GW-text-selection-color: #000;

    /*  Link underlining.
        */
    --GW-link-underline-background-color: var(--GW-body-background-color);
    --GW-link-underline-gradient-line-color: #dcdcdc;
    --GW-link-underline-gradient-line-color-hover: #8b8b8b;

    /*  Blockquotes.
        */
    --GW-blockquote-border-color-level-one: #5c5c5c;
    --GW-blockquote-border-color-level-two: #646464;
    --GW-blockquote-border-color-level-three: #747474;
    --GW-blockquote-border-color-level-four: #7f7f7f;
    --GW-blockquote-background-color-level-one: #212121;
    --GW-blockquote-background-color-level-two: #3e3e3e;
    --GW-blockquote-background-color-level-three: #4f4f4f;

    /*  Abstracts.
        */
    --GW-abstract-border-color: #6c6c6c;
    --GW-abstract-background-color: var(--GW-blockquote-background-color-level-one);

    /*  Sidebar.
        */
    --GW-sidebar-horizontal-rule-color: #7c7c7c;
    --GW-sidebar-mobile-link-border-color: #fff;

    /*  Table of contents.
        */
    --GW-TOC-border-color: #5c5c5c;
    --GW-TOC-background-color: #212121;
    --GW-TOC-link-hover-background-color: #363636;
    --GW-TOC-link-hover-color: #fff;
    --GW-TOC-link-hover-indicator-bar-color: #5c5c5c;
    --GW-TOC-number-color: #929292;
    --GW-TOC-number-hover-color: #ddd;

    /*  Collapse blocks.
        */
    --GW-collapse-block-disclosure-button-color: #8b8b8b;
    --GW-collapse-block-disclosure-button-hover-color: #b4b4b4;
    --GW-collapse-block-disclosure-button-targeted-color: #515151;
    --GW-table-collapse-block-disclosure-button-color: #5c5c5c;
    --GW-table-collapse-block-disclosure-button-hover-color: #333;
    --GW-collapse-block-disclosure-button-focus-text-shadow-color: #ff5936;
    --GW-collapse-block-disclosure-button-hover-background-color: rgba(255, 255, 255, 0.1);
    --GW-collapse-block-click-to-expand-text-color: #a6a6a6;
    --GW-collapse-block-click-to-expand-text-shadow-color: var(--GW-body-background-color);
    --GW-collapse-block-click-to-expand-text-hover-color: #cecece;
    --GW-collapse-block-hover-border-color: #a6a6a6;
    --GW-collapse-block-fade-gradient-color-one: rgba(0, 0, 0, 0);
    --GW-collapse-block-fade-gradient-color-two: rgba(0, 0, 0, 1);

    /*  Headings.
        */
    --GW-H1-box-shadow-background-color: var(--GW-body-background-color);
    --GW-H1-box-shadow-line-color: #999;
    --GW-H2-bottom-border-color: #999;

    /*  Comments.
        */
    --GW-comment-section-top-border-color: #8b8b8b;

    /*  Lists.
        */
    --GW-bulleted-list-marker-color: #9f9f9f;

    /*  Figures.
        */
    --GW-figure-outline-color: #999;
    --GW-figure-caption-outline-color: #999;

    /*  Epigraphs.
        */
    --GW-epigraph-quotation-mark-color: #9f9f9f;

    /*  Footnotes.
        */
    --GW-footnote-border-color: #7c7c7c;
    --GW-footnote-highlighted-border-color: #7c7c7c;
    --GW-footnotes-section-top-rule-color: #5c5c5c;
    --GW-footnote-backlink-border-color: #fff;
    --GW-footnote-backlink-border-hover-color: #8b8b8b;
    --GW-footnote-backlink-after-bordered-block-background-color: var(--GW-body-background-color);

    /*  Footnote references.
        */
    --GW-footnote-ref-highlight-box-shadow-color: #7c7c7c;
    --GW-footnote-ref-highlight-background-color: rgba(0, 0, 0, 0.75);

    /*  Sidenotes.
        */
    --GW-sidenote-highlight-background-color: var(--GW-body-background-color);
    --GW-sidenote-highlight-box-shadow-color: #7c7c7c;
    --GW-sidenote-border-color: #7c7c7c;
    --GW-sidenote-scrollbar-track-color: var(--GW-body-background-color);
    --GW-sidenote-scrollbar-thumb-color: #7c7c7c;
    --GW-sidenote-scrollbar-thumb-hover-color: #8b8b8b;
    --GW-sidenote-self-link-border-color: #7c7c7c;

    /*  Tables.
        */
    --GW-table-border-color: #fff;
    --GW-table-full-width-background-color: var(--GW-body-background-color);
    --GW-table-caption-border-color: #fff;
    --GW-table-row-horizontal-border-color: #fff;
    --GW-table-cell-vertical-border-color: var(--GW-body-background-color);
    --GW-table-scrollbar-track-color: var(--GW-body-background-color);
    --GW-table-scrollbar-thumb-color: #7c7c7c;
    --GW-table-scrollbar-thumb-hover-color: #8b8b8b;
    --GW-table-scrollbar-border-color: #fff;
    --GW-table-column-heading-hover-background-color: #2b3637;
    --GW-table-sorted-column-heading-background-color: #166983;
    --GW-table-sorted-column-heading-text-color: #000;
    --GW-table-sorted-column-heading-text-shadow-color: #fff;
    --GW-table-zebra-stripe-alternate-row-background-color: #252525;
    --GW-table-row-hover-outline-color: #fff;

    /*  Code blocks.
        */
    --GW-code-element-border-color: #606060;
    --GW-code-element-background-color: #1d1d1d;
    --GW-pre-element-border-color: #606060;
    --GW-pre-element-background-color: #1d1d1d;
    --GW-pre-element-scrollbar-track-color: #1d1d1d;
    --GW-pre-element-scrollbar-thumb-color: #5c5c5c;
    --GW-pre-element-scrollbar-thumb-hover-color: #8b8b8b;

    /*  Syntax highlight theme.
        */
    --GW-syntax-highlight-color-normal: #f1edec;
    --GW-syntax-highlight-color-attribute: #d8deff;
    --GW-syntax-highlight-color-data-type: inherit;
    --GW-syntax-highlight-color-variable: #b4b4b4;
    --GW-syntax-highlight-color-other: inherit;
    --GW-syntax-highlight-color-preprocessor: inherit;
    --GW-syntax-highlight-color-extension: #999;
    --GW-syntax-highlight-color-comment: #999;
    --GW-syntax-highlight-color-control-flow: #b6edaa;
    --GW-syntax-highlight-color-keyword: #d8deff;
    --GW-syntax-highlight-color-operator: #d8deff;
    --GW-syntax-highlight-color-special-char: #94adb6;
    --GW-syntax-highlight-color-built-in: #d8deff;
    --GW-syntax-highlight-color-function: #d8deff;
    --GW-syntax-highlight-color-constant: inherit;
    --GW-syntax-highlight-color-base-n: inherit;
    --GW-syntax-highlight-color-dec-val: inherit;
    --GW-syntax-highlight-color-float: inherit;
    --GW-syntax-highlight-color-information: inherit;
    --GW-syntax-highlight-color-char: inherit;
    --GW-syntax-highlight-color-string: inherit;
    --GW-syntax-highlight-color-verbatim-string: inherit;
    --GW-syntax-highlight-color-alert: #ff815c;
    --GW-syntax-highlight-color-error: #ff4727;
    --GW-syntax-highlight-color-import: #a6a6a6;
    --GW-syntax-highlight-color-special-string: #b4b4b4;

    /*  Math.
        */
    --GW-math-block-scrollbar-border-color: #5c5c5c;
    --GW-math-block-scrollbar-track-color: var(--GW-body-background-color);
    --GW-math-block-scrollbar-thumb-color: #5c5c5c;
    --GW-math-block-scrollbar-thumb-hover-color: #8b8b8b;

    /*  Drop caps.
        */
    --GW-drop-caps-yinit-color: #f9f9f9;
    --GW-drop-caps-yinit-text-shadow-color: #a6a6a6;
    --GW-drop-caps-de-zs-color: #efefef;
    --GW-drop-caps-cheshire-color: #f1f1f1;
    --GW-drop-caps-kanzlei-color: #f1f1f1;

    /*  Admonitions.
        */
    --GW-admonition-default-left-border-color: #929292;
    --GW-admonition-default-background-color: #4f4f4f;
    --GW-admonition-tip-left-border-color: #4f4f4f;
    --GW-admonition-tip-background-color: #303030;
    --GW-admonition-warning-left-border-color: #bdbdbd;
    --GW-admonition-warning-background-color: #8a8a8a;
    --GW-admonition-warning-text-color: #000;
    --GW-admonition-warning-title-background-color: #bdbdbd;
    --GW-admonition-warning-icon-color: #000;
    --GW-admonition-error-left-border-color: #e1e1e1;
    --GW-admonition-error-background-color: #bdbdbd;
    --GW-admonition-error-text-color: #000;
    --GW-admonition-error-title-background-color: #e1e1e1;
    --GW-admonition-error-icon-color: #000;

    /*  Sequential nav UI.
        */
    --GW-sequential-nav-link-background-color: var(--GW-body-background-color);

    /*  Links.
        */
    --GW-definition-annotation-text-color: #cecece;

    /*  Page-specific styles.
        */
    --GW-index-page-bottom-ornament-line-color: #9f9f9f;

    /*  Popups.
        */
    --GW-popups-body-background-color: var(--GW-body-background-color);
    --GW-popups-popup-background-color: var(--GW-body-background-color);
    --GW-popups-popup-border-color: #7c7c7c;
    --GW-popups-box-shadow-color: #7c7c7c;
    --GW-popups-popup-link-hover-color: var(--GW-link-hover-color);
    --GW-popups-popup-scrollbar-thumb-color: #5c5c5c;
    --GW-popups-popup-scrollbar-track-color: var(--GW-body-background-color);
    --GW-popups-popup-scrollbar-thumb-hover-color: #8b8b8b;
    --GW-popups-popup-options-dialog-backdrop-background-color: rgba(0, 0, 0, 0.95);
    --GW-popups-popup-options-dialog-background-color: var(--GW-body-background-color);
    --GW-popups-popup-options-dialog-border-color: #7c7c7c;
    --GW-popups-popup-options-dialog-box-shadow-color: #cecece;
    --GW-popups-popup-options-dialog-horizontal-rule-color: #5c5c5c;
    --GW-popups-popup-options-dialog-button-background-color: var(--GW-body-background-color);
    --GW-popups-popup-options-dialog-button-text-color: #fff;
    --GW-popups-popup-options-dialog-button-border-color: #fff;
    --GW-popups-popup-options-dialog-button-hover-box-shadow-color: #fff;
    --GW-popups-popup-options-dialog-option-button-explanation-text-color: #a6a6a6;
    --GW-popups-popup-options-dialog-option-button-hover-text-color: #a6a6a6;
    --GW-popups-popup-options-dialog-radio-button-border-color: #fff;
    --GW-popups-show-popup-options-dialog-button-color: #8b8b8b;

	/*	Link bibliography.
		*/
	--GW-link-bibliography-border-color: #5c5c5c;

    /*  Image focus.
        */
    --GW-image-focus-image-hover-drop-shadow-color: #a6a6a6;

    /*  Mode selector (light/dark mode).
        */
    --GW-mode-selector-background-color: var(--GW-body-background-color);
    --GW-mode-selector-border-hover-color: #7c7c7c;
    --GW-mode-selector-button-text-color: #a6a6a6;
    --GW-mode-selector-button-hover-text-color: #fff;
}
:root {
	--GW-body-background-color: #010101;
}

hr::after,
.horizontalRule-nth-0 hr::after {
    opacity: 1;
    filter: invert(1) drop-shadow(0 0 0 currentColor);
}
.horizontalRule-nth-1 hr::after {
    opacity: 0.75;
    filter: invert(1);
}
.horizontalRule-nth-2 hr::after {
    opacity: 0.85;
    filter: invert(1);
}

body.drop-caps-goudy #markdownBody > p:first-child::first-letter,
body.drop-caps-goudy .abstract + p::first-letter,
body.drop-caps-goudy #markdownBody > .epigraph:first-child + p::first-letter,
#markdownBody .drop-cap-goudy::first-letter,
#markdownBody .drop-cap-goudy > p::first-letter {
    opacity: 0.95;
}

.admonition.tip::before,
.admonition.note::before,
.admonition.warn::before,
.admonition.warning::before,
.admonition.error::before {
    filter: invert(1);
}

ul > li::before {
    filter: invert(1);
}

th.tablesorter-header {
    background-image: url('/static/img/tablesorter/tablesorter-bg-dark.gif');
}
th.tablesorter-headerAsc {
    background-image: url('/static/img/tablesorter/tablesorter-asc-dark.gif');
}
th.tablesorter-headerDesc {
    background-image: url('/static/img/tablesorter/tablesorter-desc-dark.gif');
}

.tableWrapper::-webkit-scrollbar-thumb {
    background-image: url('data:image/gif;base64,R0lGODlhBAAEAPAAMQAAAIiIiCwAAAAABAAEAAACBkwAhqgZBQA7');
}
.tableWrapper::-webkit-scrollbar-thumb:hover {
    background-image: url('data:image/gif;base64,R0lGODlhBAAEAPAAMQAAAL+/vywAAAAABAAEAAACBkwAhqgZBQA7');
}

.sidenote.cut-off .sidenote-outer-wrapper::-webkit-scrollbar-thumb {
    background-image: url('data:image/gif;base64,R0lGODlhBAAEAPAAMQAAAIiIiCwAAAAABAAEAAACBkwAhqgZBQA7');
}
.sidenote.cut-off .sidenote-outer-wrapper::-webkit-scrollbar-thumb:hover {
    background-image: url('data:image/gif;base64,R0lGODlhBAAEAPAAMQAAAL+/vywAAAAABAAEAAACBkwAhqgZBQA7');
}

img.invertible,
img.invertible-auto {
    filter: grayscale(50%) invert(100%) brightness(95%) hue-rotate(180deg);
}

img:not(.invertible):not(.invertible-auto) {
    filter: grayscale(50%);
}

img,
img.invertible,
img.invertible-auto {
    transition: filter 0.25s ease;
}

img:hover,
img.invertible:hover,
img.invertible-auto:hover {
    filter: none;
    transition: filter 0s ease 0.25s;
}

#mode-selector {
    opacity: 0.6;
}

#mode-selector button::before {
	filter: invert(1);
	opacity: 0.45;
}
#mode-selector button.select-mode-light::before {
	opacity: 0.55;
}

article > div:not(#TOC) a[href*='wikipedia.org'].docMetadata:hover,
article > div:not(#TOC) a[href*='wikimedia.org'].docMetadata:hover,
article > div:not(#TOC) a[href*='wiktionary.org'].docMetadata:hover,
article > div:not(#TOC) a[href*='wikimediafoundation.org'].docMetadata:hover,
article > div:not(#TOC) a[href*='wikisource.org'].docMetadata:hover,
#markdownBody span.defnMetadata:hover {
    background-image: var(--GW-dotted-underline-hover-dark-background-image);
}

section > :not(:first-child) a[href^='#'][class^='identifier-link-']::after,
p a[href^='#'][class^='identifier-link-']::after,
li a[href^='#'][class^='identifier-link-']::after,
a[href$$='.pdf' i]::after,
a[href$$='/pdf' i]::after,
a[href$$='type=pdf' i]::after,
a[href*='.pdf#' i]::after,
a[href*='pdfs.semanticscholar.org' i]::after,
a[href$$='.epub' i]::after,
a[href*='citeseerx.ist.psu.edu' i]::after,
a[href*='eprint.iacr.org' i]::after,
a[href$$='.opml' i]::after,
a[href$$='.txt' i]::after,
a[href$$='.xml' i]::after,
a[href$$='.css' i]::after,
a[href$$='.hs' i]::after,
a[href$$='.js' i]::after,
a[href$$='.json' i]::after,
a[href$$='.jsonl' i]::after,
a[href^="/"][href$$='.php' i]::after,
a[href$$='.conf' i]::after,
a[href$$='.sh' i]::after,
a[href$$='.R' i]::after,
a[href$$='.patch' i]::after,
a[href$$='.diff' i]::after,
a[href$$='.doc' i]::after,
a[href$$='.docx' i]::after,
a[href*='docs.google.com' i]::after,
a[href$$='.xls' i]::after,
a[href$$='.xlsx' i]::after,
a[href$$='.ods' i]::after,
a[href$$='.csv' i]::after,
a[href$$='.gif' i]::after,
a[href$$='.bmp' i]::after,
a[href$$='.ico' i]::after,
a[href$$='.jpg' i]::after,
a[href$$='.jpeg' i]::after,
a[href$$='.png' i]::after,
a[href$$='.svg' i]::after,
a[href$$='.xcf' i]::after,
a[href*='imgur.com']::after,
a[href$$='.mp3' i]::after,
a[href$$='.wav' i]::after,
a[href$$='.flac' i]::after,
a[href$$='.ogg' i]::after,
a[href$$='.rm' i]::after,
a[href$$='.swf' i]::after,
a[href$$='.avi' i]::after,
a[href$$='.mp4' i]::after,
a[href$$='.webm' i]::after,
a[href$$='.tar' i]::after,
a[href$$='.zip' i]::after,
a[href$$='.xz'  i]::after,
a[href$$='.img' i]::after,
a[href$$='.bin' i]::after,
a[href$$='.pkl' i]::after,
a[href$$='.onnx' i]::after,
a[href$$='.pt' i]::after,
a[href$$='.ebt' i]::after,
a[href$$='.mdb' i]::after,
a[href$$='.mht' i]::after,
a[href$$='.ttf' i]::after,
a[href*='biorxiv.org']::after,
a[href*='medrxiv.org']::after,
a[href*='substack.com']::after,
a[href*='scholar.google.com']::after,
a[href*='plosone.org']::after,
a[href*='plosmedicine.org']::after,
a[href*='plos.org']::after,
a[href*='www.plos']::after,
a[href*='patreon.com']::after,
a[href*='uptontea.com']::after,
a[href*='wired.com']::after,
a[href*='washingtonpost.com']::after,
a[href*='nytimes.com']::after,
a[href*='nlm.nih.gov']::after,
a[href*='newyorker.com']::after,
a[href*='theguardian.com']::after,
a[href*='www.guardian.co.uk']::after,
a[href*='reddit.com']::after,
a[href*='paulgraham.com']::after,
a[href*='ycombinator.com']::after,
a[href*='intelligence.org']::after,
a[href*='deepmind']::after,
a[href*='docs/.*/*.pdf#deepmind']::after,
a[href*='openai']::after,
a[href$$='.pdf#openai']::after,
a[href*='distill.pub']::after,
a[href*='twitter.com']::after,
a[href*='nitter.net']::after,
a[href*='erowid.org']::after,
a[href*='wikipedia.org']::after,
a[href*='wikimedia.org']::after,
a[href*='wiktionary.org']::after,
a[href*='wikimediafoundation.org']::after,
a[href*='wikisource.org']::after,
a[href*='youtube.com']::after,
a[href*='youtu.be']::after,
a[href*='soundcloud.com']::after,
a[href*='bandcamp.com']::after,
a[href*='overflow.net']::after,
a[href*='overflow.com']::after,
a[href*='stackexchange.com']::after,
a[href*='amazon.com']::after,
a[href*='amazon.co.']::after,
a[href*='amzn.com'  ]::after,
a[href*='github.com']::after,
a[href*='dropbox.com']::after,
a[href*='dropboxusercontent.com']::after,
a[href*='mega.nz']::after,
a[href*='webcitation.org'   ]::after,
a[href*='mementoweb.org'    ]::after,
a[href*='archive.org'       ]::after,
a[href*='archive-it.org'    ]::after,
a[href*='archiveteam.org'   ]::after,
a[href*='waybackmachine.org']:hover::after,
a[href*="tumblr.com"]::after,
a[href*="t.umblr.com"]::after,
a[href*="#facebook"]::after,
a[href*="#facebook"][href*="arxiv.org"]::after,
a[href*='docs/.*/*.pdf#.*facebook']::after,
a[href*="facebook.com"]::after,
a[href*="bitcointalk.org"]::after,
a[href*="bitcoin.it"]::after,
a[href*="www.google.com"]::after,
a[href*="#google"]::after,
a[href*="#org=google"]::after,
a[href*="#google"][href*="arxiv.org"]::after,
a[href*="#org=google"][href*="arxiv.org"]::after,
a[href*='docs/.*/*.pdf#.*google']::after,
a[href*='docs/.*/*.pdf#org=google']::after {
    filter: invert(1);
}

:root {
    --GW-syntax-highlight-color-control-flow: #cce1c8;
}
</style>
<script>
/*  Create global 'GW' object, if need be.
    */
if (typeof window.GW == "undefined")
    window.GW = { };

/*****************/
/* MEDIA QUERIES */
/*****************/

GW.mediaQueries = {
    mobileWidth:           matchMedia("(max-width: 650px)"),
    systemDarkModeActive:  matchMedia("(prefers-color-scheme: dark)"),
    hoverAvailable:        matchMedia("only screen and (hover:hover) and (pointer:fine)")
};

GW.isMobile = () => {
	/*  We consider a client to be mobile if one of two conditions obtain:
		1. JavaScript detects touch capability, AND viewport is narrow; or,
		2. CSS does NOT detect hover capability.
		*/
	return (   (   ('ontouchstart' in document.documentElement)
				&& GW.mediaQueries.mobileWidth.matches)
			|| !GW.mediaQueries.hoverAvailable.matches);
};

/********************/
/* DEBUGGING OUTPUT */
/********************/

GW.logLevel = localStorage.getItem("gw-log-level") || 0;
GW.logSourcePadLength = 18;
GW.dateTimeFormat = new Intl.DateTimeFormat([], { hour12: false, hour: "numeric", minute: "numeric", second: "numeric" });

function GWLog (string, source = "", level = 1) {
    if (GW.logLevel < level) return;

    let time = Date.now();
    let ms = `$${(time % 1000)}`.padStart(3,'0');
    let timestamp = `[$${GW.dateTimeFormat.format(time)}.$${ms}]  `;
    let sourcestamp = (source > "" ? `[$${source}]` : `[ ]`).padEnd(GW.logSourcePadLength, ' ');

    console.log(timestamp + sourcestamp + string);
}
GW.setLogLevel = (level, permanently = false) => {
    if (permanently)
        localStorage.setItem("gw-log-level", level);

    GW.logLevel = level;
};

/***********/
/* HELPERS */
/***********/

/*	Helper function for AJAX, by kronusaturn
	https://github.com/kronusaturn/lw2-viewer/blob/master/www/script.js
	*/
function doAjax(options) {
	let req = new XMLHttpRequest();
	req.addEventListener("load", (event) => {
		if (event.target.status < 400) {
			if (options["onSuccess"]) options.onSuccess(event);
		} else {
			if (options["onFailure"]) options.onFailure(event);
		}
	});
	req.open((options["method"] || "GET"), (options.location || document.location) + (options.params ? "?" + urlEncodeQuery(options.params) : ""));
	if (options["method"] == "POST") {
		req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
		req.send(urlEncodeQuery(options.params));
	} else {
		req.send();
	}
}

/*  Returns true if the given element intersects the viewport, false otherwise.
    */
function isOnScreen (element) {
    let rect = element.getBoundingClientRect();
    return (rect.top < window.innerHeight &&
            rect.bottom > 0 &&
            rect.left < window.innerWidth &&
            rect.right > 0);
}

/*	Returns the string trimmed of opening/closing quotes.
	*/
String.prototype.trimQuotes = function () {
	return this.replace(/^["'“‘]?(.+?)["'”’]?$$/, '$$1');
};

/*  Returns true if the string begins with any of the given prefixes.
    */
String.prototype.startsWithAnyOf = function (prefixes) {
    for (prefix of prefixes)
        if (this.startsWith(prefix))
            return true;
    return false;
}

/*  Returns true if the string includes any of the given substrings.
    */
String.prototype.includesAnyOf = function (substrings) {
    for (substring of substrings)
        if (this.includes(substring))
            return true
    return false;
}

Array.prototype.remove = function (item) {
    var index = this.indexOf(item);
    if (index !== -1)
        this.splice(index, 1);
};

Array.prototype.removeIf = function (test) {
    var index = this.findIndex(test);
    if (index !== -1)
        this.splice(index, 1);
};

/*  Run the given function immediately if the page is already loaded, or add
    a listener to run it as soon as the page loads.
    */
function doWhenPageLoaded(f) {
    if (document.readyState == "complete")
        f();
    else
        window.addEventListener("load", f);
}

/*  Given an HTML string, creates an element from that HTML, adds it to
    #ui-elements-container (creating the latter if it does not exist), and
    returns the created element.
    */
function addUIElement(element_html) {
    var ui_elements_container = document.querySelector("#ui-elements-container");
    if (!ui_elements_container) {
        ui_elements_container = document.createElement("div");
        ui_elements_container.id = "ui-elements-container";
        document.querySelector("body").appendChild(ui_elements_container);
    }

    ui_elements_container.insertAdjacentHTML("beforeend", element_html);
    return ui_elements_container.lastElementChild;
}

/*****************/
/* NOTIFICATIONS */
/*****************/
/*  Options object may have members:

        `once` (boolean; does the handler get removed after being called?)
    */
GW.notificationCenter = { };
GW.notificationCenter.addHandlerForEvent = function (eventName, f, options = { }) {
    if (GW.notificationCenter[eventName] == null)
        GW.notificationCenter[eventName] = [ ];

    if (GW.notificationCenter[eventName].findIndex(handler => handler.f == f) !== -1)
        return;

    GW.notificationCenter[eventName].push({ f: f, options: options });
};
GW.notificationCenter.removeHandlerForEvent = function (eventName, f, options = { }) {
    if (GW.notificationCenter[eventName] == null)
        return;

    GW.notificationCenter[eventName].removeIf(handler => handler.f == f);
}
GW.notificationCenter.cancelAllHandlersForEvent = function (eventName) {
    GW.notificationCenter[eventName] = null;
}
GW.notificationCenter.fireEvent = function (eventName, eventInfo) {
    GWLog(`Event “$${eventName}” fired.`, "notification");

    if (GW.notificationCenter[eventName] == null)
        return;

    GW.notificationCenter[eventName].forEach(handler => {
        handler.f(eventInfo);
        if (handler.options.once)
            GW.notificationCenter.removeHandlerForEvent(eventName, handler.f);
    });
}

/******************/
/* BROWSER EVENTS */
/******************/

GWLog("document.readyState." + document.readyState, "browser event");
window.addEventListener("DOMContentLoaded", () => {
    GWLog("window.DOMContentLoaded", "browser event");
});
window.addEventListener("load", () => {
    GWLog("window.load", "browser event");
});
document.addEventListener("readystatechange", () => {
    GWLog("document.readyState." + document.readyState, "browser event");
});
</script>
<script>
/*	This code is part of darkmode.js by Said Achmiz.
	See the file `darkmode.js` for license and more information.
	*/

/*	Dark mode: before anything else loads, check browser localStorage for dark 
	mode preference and immediately toggle sets of CSS color variables/classes 
	to avoid any 'flash of white' or delayed loading. Note: CSS falls back to 
	the media-query browser/OS variable preference, so still works if JS is 
	blocked! (The JS is only necessary for the theme switcher widget allowing 
	'force light'/'force dark' options. If users block JS, set the dark mode 
	preference, and are unhappy when they get dark mode, well, they made their 
	bed and must lie in it.)
	*/

/*  Set specified color mode (auto, light, dark).
    */
function setMode(modeOption) {
    GWLog("setMode", "darkmode.js");

    // Inject the appropriate styles.
    let darkModeStyles = document.querySelector("#inlined-dark-mode-styles, #dark-mode-styles");
    if (darkModeStyles == null) return;
    if (modeOption == 'auto') {
        darkModeStyles.media = "all and (prefers-color-scheme: dark)";
    } else if (modeOption == 'dark') {
        darkModeStyles.media = "all";
    } else {
        darkModeStyles.media = "not all";
    }

    // Update selector state.
    if (window.updateModeSelectorState)
	    updateModeSelectorState();
}

// Get saved mode setting (or default).
let currentMode = localStorage.getItem("selected-mode") || 'auto';

// Activate saved mode.
setMode(currentMode);
</script>
